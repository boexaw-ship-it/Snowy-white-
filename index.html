<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snow White‚Äôs Cakes & Flora</title>
    
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#d63031">
    <link rel="apple-touch-icon" href="./assets/logos/icon-192.png">

    <link rel="stylesheet" href="style.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <div class="logo-area">
            <h1>Snow White's</h1>
            <p>Premium Cakes & Floral Boutique</p>
        </div>
    </header>

    <main id="app-container">
        
        <section id="home" class="page active">
            <div class="promo-banner">
                <div class="promo-content">
                    <h3>Special Offer üçé</h3>
                    <p>Order any 2 cakes & get free delivery!</p>
                </div>
            </div>

            <h2 class="section-title">Best Sellers</h2>
            <div class="product-grid" id="featured-products">
                <p style="text-align: center; grid-column: 1/-1;">Loading products...</p>
            </div>
        </section>

        <section id="shop" class="page">
            <h2 class="section-title">Our Menu</h2>
            <div class="filter-bar" style="margin-bottom: 15px; display: flex; gap: 10px; overflow-x: auto; padding: 5px 0;">
                <button onclick="renderProducts('all')" class="filter-btn">All</button>
                <button onclick="renderProducts('cake')" class="filter-btn">Cakes</button>
                <button onclick="renderProducts('flower')" class="filter-btn">Flowers</button>
            </div>
            
            <div class="product-grid" id="product-list-container">
                </div>
        </section>

        <section id="cart" class="page">
            <h2 class="section-title">My Basket</h2>
            <div id="cart-items-list" class="cart-container">
                <p class="empty-msg">Your basket is currently empty.</p>
            </div>

            <div class="checkout-form card" style="margin-top: 20px;">
                <h3>Order Information</h3>
                <input type="text" id="cust-name" placeholder="Full Name" required>
                <input type="tel" id="cust-phone" placeholder="Phone Number" required>
                <textarea id="cust-address" placeholder="Delivery Address" rows="3"></textarea>
                
                <label for="township" style="font-size: 13px; font-weight: bold; margin-top: 10px; display: block;">Select Township</label>
                <select id="township" onchange="calculateTotal()" class="size-select">
                    <option value="0">Select your area</option>
                    <option value="2000">Latha (2,000 Ks)</option>
                    <option value="3000">Hlaing (3,000 Ks)</option>
                    <option value="4000">Tamwe (4,000 Ks)</option>
                    <option value="5000">North Dagon (5,000 Ks)</option>
                </select>

                <div class="total-section" style="margin: 20px 0; padding-top: 15px; border-top: 1px dashed #ccc;">
                    <strong>Total Amount:</strong>
                    <span style="color: #d63031; font-size: 1.2rem; font-weight: bold;"><span id="grand-total">0</span> Ks</span>
                </div>

                <button class="order-submit-btn" onclick="submitOrder()" style="width: 100%; padding: 15px; font-size: 1rem;">
                    Confirm via Telegram
                </button>
            </div>
        </section>

        <section id="contact" class="page">
            <h2 class="section-title">Contact Us</h2>
            <div class="info-card card">
                <p>üìç No.45, Snow White St, Yangon</p>
                <p>üìû 09-987654321</p>
                <p>üìß order@snowwhite.com</p>
                <button class="add-btn" style="width: 100%; margin-top: 10px;" onclick="window.open('https://maps.google.com')">Get Directions</button>
            </div>
        </section>

    </main>

    <div id="toast-container"></div>

    <nav class="bottom-navbar">
        <button class="nav-link active" onclick="changeTab('home', this)">
            <span class="icon">üè†</span>
            <span>Home</span>
        </button>
        <button class="nav-link" onclick="changeTab('shop', this)">
            <span class="icon">üõí</span>
            <span>Shop</span>
        </button>
        <button class="nav-link" onclick="changeTab('cart', this)">
            <span class="icon">üõçÔ∏è</span>
            <span>Cart</span>
        </button>
        <button class="nav-link" onclick="changeTab('contact', this)">
            <span class="icon">üìç</span>
            <span>Contact</span>
        </button>
    </nav>

    <script src="script.js"></script>
    <script src="telegram.js"></script>

    <script>
        // ·ÅÅ·Åã App ·ÄÖ·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äô·Äæ·Ä¨ Google Sheets ·ÄÄ·Äî·Ä± Data ·ÄÜ·ÄΩ·Ä≤·Äô·Äö·Ä∫
        window.onload = () => {
            // script.js ·Äë·Ä≤·ÄÄ fetchProducts function ·ÄÄ·Ä≠·ÄØ ·Ä°·Äì·Ä≠·ÄÄ ·Äû·ÄØ·Ä∂·Ä∏·Äï·Ä´·Äô·Äö·Ä∫
            if (typeof fetchProducts === "function") {
                fetchProducts(); 
            } else {
                // Sheets API URL ·Äô·Äë·Ää·Ä∑·Ä∫·Äõ·Äû·Ä±·Ä∏·ÄÅ·ÄÑ·Ä∫ ·Äö·Ä¨·Äö·ÄÆ·Äï·Äº·Äñ·Ä≠·ÄØ·Ä∑ (Optional)
                if (typeof renderProducts === "function") {
                    renderProducts('all'); 
                    renderFeatured();      
                }
            }
        };

        // ·ÅÇ·Åã Service Worker (PWA) Register ·Äú·ÄØ·Äï·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log("Service Worker Active: ", reg.scope))
            .catch(err => console.log("SW Error:", err));
        }
    </script>
</body>
</html>
